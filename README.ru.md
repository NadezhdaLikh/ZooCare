# ZooCare - веб-приложение для автоматизации учета состояния здоровья животных в зоопарке
Описание проекта доступно также на английском языке: [English version](README.md).
## Концепция
Данный проект является учебным pet-проектом и реализует функционал для централизованного, автоматизированного учёта состояния здоровья животных в зоопарке. Его цель - способствовать своевременному оказанию ветеринарной помощи и надлежащему уходу.

## Функционал
Реализованы:
+ аутентификация и авторизация пользователей веб-приложения - администратора системы, смотрителей и ветеринаров зоопарка;
+ назначение пользователям ролей с разграничением прав доступа;
+ просмотр, добавление, редактирование и удаление из базы данных приложения информации о животных зоопарка, его сотрудниках, результатах мониторинга за состоянием здоровья животных, проводимых ветеринарных осмотрах и медицинских процедурах, используемых медикаментах и их поставщиках;
+ фильтрация и сортировка данных по заданным критериям.

## Технологический стек
В рамках данного pet-проекта реализована только серверная часть (backend) приложения.
+ **Языки программирования:** Java 17, SQL.
+ **Фреймворки и библиотеки:** Spring (Boot, Data, Security), Hibernate.
+ **Безопасность и аутентификация:** JSON Web Token.
+ **Управление сборкой и зависимостями:** Apache Maven.
+ **Системы управления базами данных (СУБД):** PostgreSQL.
+ **API и веб-сервисы:** REST, HTTP, Swagger, Postman.
+ **Контроль версий и совместная работа:** Git, GitHub.

Веб-приложение разрабатывалось в IDE IntelliJ IDEA Community Edition.

## База данных
Для данного приложения использовалась реляционная модель базы данных. Созданная на ее основе схема БД - даталогическая модель - изображена ER-диаграммой в нотации Мартина на рисунке ниже.

![ER-диаграмма](https://github.com/NadezhdaLikh/zoocare/blob/master/ER-model-martin.jpg)

В базе данных приложения есть 10 таблиц:
+ в **“employee”** хранится информация о сотрудниках зоопарка; 
+ в **“animal”** хранится информация о животных зоопарка; 
+ в **“enclosure”** хранится информация о местообитаниях, которые населяют животные; 
+ в **“observation”** хранится информация о наблюдениях за животными, которые делают и документируют смотрители зоопарка; 
+ в **“examination”** хранится информация о медицинских осмотрах, проводимых ветеринарами зоопарка; 
+ в **“medication”** хранится информация о медицинских препаратах, которыми ветеринары зоопарка лечат животных; 
+ в **“medication _supplier”** хранится информация о поставщиках медицинских препаратов; 
+ в **“medical_procedure”** хранится информация о медицинских процедурах, которые провели ветеринары зоопарка; 
+ в **“batch_in_stock”** хранится информация о партиях медицинских препаратов, хранящихся на складе; 
+ в **“medication_usage”** хранится информация о расходе медицинских препаратов во время проведения медицинских процедур.

## Роли и полномочия пользователей
Пользователю веб-приложения может быть назначена одна из трех ролей: администратор, смотритель зоопарка или ветеринар. 
_Только **администратор**_ может добавлять и редактировать информацию о сотрудниках зоопарка и только ему известно, какая роль какому пользователю была назначена. 

_Только **ветеринар**_ может: 
+ добавлять и редактировать информацию о медицинских препаратах, поставляемых в зоопарк и использующихся во время разных медицинских процедур;
+ добавлять и редактировать информацию о партиях препаратов, хранящихся на складе;
+ добавлять и редактировать информацию о проводимых медицинских осмотрах;
+ добавлять и редактировать информацию о проделанных медицинских процедурах;
+ добавлять и редактировать информацию о расходе медицинских препаратов;
+ заверять и комментировать наблюдения, сделанные смотрителями зоопарка, ухаживающими за животными.

_Только **смотрители зоопарка**_ могут добавлять и редактировать информацию о сделанных ими наблюдениях. Однако, если смотритель внес какие-то изменения в запись о наблюдении, которая уже была просмотрена и прокомментирована ветеринаром, эта запись должна будет быть заверена ветеринаром повторно.
И ветеринары зоопарка, и администратор веб-приложения могут: 
+ добавлять и редактировать информацию о животных зоопарка; 
+ добавлять и редактировать информацию о поставщиках медицинских препаратов; 
+ просматривать информацию о расходе медицинских препаратов.
  
Стоит отметить, что редактировать записи о наблюдениях, осмотрах и процедурах могут только те смотрители и ветеринары зоопарка, которые **первоначально их и создали**.

Все пользователи могут просматривать информацию обо всех сотрудниках, животных и их местообитаниях в зоопарке; медицинских препаратах и их поставщиках; партиях с препаратами на складе; наблюдениях, сделанных смотрителями зоопарка; осмотрах и медицинских процедурах, проведенных ветеринарами.

## Регистрация и авторизация
Процедура аутентификации и авторизации одинаковая для всех пользователей, однако смотрителей и ветеринаров администратор регистрирует вручную. При этом системой автоматически генерируется пароль, который отправляется на email нового пользователя. В таком слусае логином для входа в систему будет являться email-адрес, на который было отправлено письмо с паролем.

Администратору регистрироваться в системе не требуется.

## Развертывание приложения
### 1. Клонирование репозитория
```
git clone https://github.com/NadezhdaLikh/zoocare.git
cd zoocare
```

### 2. Настройка параметров приложения
Скопируйте файл application.yml.example из папки backend в application.yml. Заполните его **своими** учетными данными и настройками:

#### База данных
1. Установите и запустите PostgreSQL.
2. Создайте базу данных.
3. Укажите имя базы данных, пользователя и пароль.
4. 
#### SMTP (электронная почта)
Укажите параметры SMTP-сервера (хост, порт, имя пользователя, пароль).

### 3. Добавление данных админа в БД
**Перед** первым запуском откройте `backend/src/main/java/ru/codeline/configuration/AdminCredentials.java` и добавьте в сеттеры класса персональные данные администратора приложения. При первом запуске бэкенда запись о нем будет автоматически добавлена в базу данных.

### 4. Сборка и запуск проекта
```
mvn spring-boot:run
```

## Документация API
После запуска приложения вы можете просмотреть документацию API в Swagger. Она содержит полный список эндпоинтов, доступных пользователю, и доступна по ссылке: [http://localhost:8080/swagger-ui/index.html](http://localhost:8080/swagger-ui/index.html).
